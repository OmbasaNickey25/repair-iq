<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RepairIQ: Smart Hardware Learning</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/css/style.css">
    <!-- PWA Theme Color -->
    <meta name="theme-color" content="#1a1a1a">
    <link rel="icon" href="/icons/icon-192x192.png">
    <!-- Puter.js -->
    <script src="https://js.puter.com/v2/"></script>
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <h1 class="app-title">ğŸ”§ RepairIQ</h1>
            <p class="app-subtitle">Smart Hardware Learning Assistant</p>
        </div>
    </header>

    <div id="app">
        <!-- Camera View -->
        <div class="camera-container">
            <video id="camera-feed" autoplay playsinline muted></video>
            <canvas id="ar-overlay"></canvas>
        </div>

        <!-- Controls -->
        <div class="controls-layer">
            <button id="scan-btn" class="scan-btn" aria-label="Scan Component">
                <span class="icon">ğŸ”</span> SCAN
            </button>
            <button id="refresh-btn" class="refresh-btn" aria-label="Refresh Scan">
                <span class="icon">ğŸ”„</span> REFRESH
            </button>
            <button id="camera-btn" class="camera-btn" aria-label="Switch Camera">
                <span class="icon">ğŸ“±</span> PHONE
            </button>
        </div>

        <!-- Info Card -->
        <div id="component-card" class="component-card hidden">
            <!-- Content injected by JS -->
        </div>

        <!-- Voice Controls -->
        <div id="voice-controls" class="voice-controls">
            <!-- Buttons injected by JS -->
        </div>
    </div>

    <!-- Main Script -->
    <script type="module" src="/src/index.js"></script>
    
    <!-- PWA Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/serviceWorker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
